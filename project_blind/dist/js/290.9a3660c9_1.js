"use strict";(self["webpackChunkproject_blind"]=self["webpackChunkproject_blind"]||[]).push([[290],{2290:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDatas}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150"}}),t("el-table-column",{attrs:{prop:"sex",label:"性别",width:"150"}}),t("el-table-column",{attrs:{prop:"birthData",label:"生日",width:"150"}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.row.id)}}},[e._v("删除")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")])]}}])})],1),t("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"400px"},on:{"update:visible":function(t){e.editVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"用户名",size:"mini"}},[t("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"性别",size:"mini"}},[t("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-radio",{attrs:{label:0}},[e._v("男")]),t("el-radio",{attrs:{label:1}},[e._v("女")])],1)],1),t("el-form-item",{attrs:{label:"生日",size:"mini"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.birthData,callback:function(t){e.$set(e.form,"birthData",t)},expression:"form.birthData"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveEdit}},[e._v("确定")])],1)],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.totalItems},on:{"current-change":e.handleCurrentChange}})],1)],1)},i=[],r=a(6130),l=a(1933),o={name:"User",data(){return{token:"",user:JSON.parse(localStorage.getItem("user")),editVisible:!1,tableDatas:[],DeleteUserByIdBo:{token:"",id:-1},form:{id:"",username:"",sex:"",birthData:""},UserUpdateBo:{token:"",id:"",username:"",sex:"",birthData:""},pageSize:5,currentPage:1,totalItems:0,idx:-1}},mounted(){this.token=(0,r.R)("token"),this.load()},methods:{async load(){try{const e=await(0,l.gv)("/user/findAll",{token:this.token,start:this.currentPage,size:this.pageSize});if(e&&e.data){const t=e.data;this.tableDatas=t.list,this.totalItems=t.count}else console.error("Unexpected response format:",e)}catch(e){console.error("Failed to load data:",e)}},async handleCurrentChange(e){this.currentPage=e,await this.load()},async handleDelete(e){this.DeleteUserByIdBo.id=e,this.DeleteUserByIdBo.token=this.token;const t=await(0,l.gv)("/user/deleteUserById",this.DeleteUserByIdBo);alert(t.message),this.load()},handleEdit(e){this.editVisible=!0;let t=e.birthData;this.form={id:e.id,username:e.username,sex:e.sex,birthData:t}},async saveEdit(){let e=new Date(this.form.birthData),t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();this.UserUpdateBo.token=this.token,this.UserUpdateBo.id=this.form.id,this.UserUpdateBo.username=this.form.username,this.UserUpdateBo.sex=this.form.sex,this.UserUpdateBo.birthData=t;const a=await(0,l.gv)("/user/updateUserById",this.UserUpdateBo);alert(a.message),this.editVisible=!1,this.load()}}},n=o,d=a(1656),u=(0,d.A)(n,s,i,!1,null,"38d646ec",null),c=u.exports}}]);
//# sourceMappingURL=290.9a3660c9.js.map