"use strict";(self["webpackChunkproject_blind"]=self["webpackChunkproject_blind"]||[]).push([[425],{1425:function(e,i,t){t.r(i),t.d(i,{default:function(){return d}});var o=function(){var e=this,i=e._self._c;return i("div",{staticClass:"form-container"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"用户名",size:"mini"}},[i("el-input",{model:{value:e.form.name,callback:function(i){e.$set(e.form,"name",i)},expression:"form.name"}})],1),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{type:"hidden"},domProps:{value:e.form.id},on:{input:function(i){i.target.composing||e.$set(e.form,"id",i.target.value)}}}),i("el-form-item",{attrs:{label:"图片",size:"mini"}},[i("el-upload",{attrs:{action:e.uploadUrl,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleUploadSuccess,"file-list":e.fileList,name:"file",data:{id:e.form.userId}}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(i){e.dialogVisible=i}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),i("el-form-item",{attrs:{label:"身高",size:"mini"}},[i("el-input",{model:{value:e.form.height,callback:function(i){e.$set(e.form,"height",i)},expression:"form.height"}})],1),i("el-form-item",{attrs:{label:"学历",size:"mini"}},[i("el-input",{model:{value:e.form.educationLevel,callback:function(i){e.$set(e.form,"educationLevel",i)},expression:"form.educationLevel"}})],1),i("el-form-item",{attrs:{label:"职业",size:"mini"}},[i("el-input",{model:{value:e.form.occupation,callback:function(i){e.$set(e.form,"occupation",i)},expression:"form.occupation"}})],1),i("el-form-item",{attrs:{label:"爱好",size:"mini"}},[i("el-input",{model:{value:e.form.interestsHobbies,callback:function(i){e.$set(e.form,"interestsHobbies",i)},expression:"form.interestsHobbies"}})],1),i("el-form-item",{attrs:{label:"自我介绍",size:"mini"}},[i("el-input",{model:{value:e.form.selfDescription,callback:function(i){e.$set(e.form,"selfDescription",i)},expression:"form.selfDescription"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.editNo}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addOrUpdateProfile}},[e._v("确定")])],1),i("router-view")],1)},s=[],r=(t(4114),t(1933)),l=t(6130),a={data(){return{dialogImageUrl:"",dialogVisible:!1,idx:-1,isHave:!1,token:"",tableDatas:[],form:{id:"",name:"",img:"",height:"",educationLevel:"",occupation:"",interestsHobbies:"",selfDescription:""},ProfilesAddBo:{token:"",userId:"",name:"",img:"",height:"",educationLevel:"",occupation:"",interestsHobbies:"",selfDescription:""},ProfilesUpdateBo:{token:"",userId:"",name:"",img:"",height:"",educationLevel:"",occupation:"",interestsHobbies:"",selfDescription:""},ProfilesQueryBo:{token:"",userId:""},fileList:[],uploadUrl:"http://localhost:8006/profiles/uploadImg"}},mounted(){const e=JSON.parse(localStorage.getItem("user"));this.idx=e.id,this.token=(0,l.R)("token"),this.load()},methods:{async load(){this.ProfilesQueryBo.userId=this.idx;var e=await(0,r.gv)("/profiles/queryProfilesById",this.ProfilesQueryBo);e.data&&(this.form=Object.assign({},this.form,e.data),this.fileList=[{name:"Image",url:this.form.img}]),this.isHave="查询成功"===e.message},editNo(){this.$router.push("/index")},async addOrUpdateProfile(){this.form.name&&this.form.height&&this.form.educationLevel&&this.form.occupation&&this.form.interestsHobbies&&this.form.selfDescription?(this.isHave?await this.updateProfile():await this.addProfile(),this.load(),alert("操作成功")):alert("请填写完整的表单信息")},async addProfile(){this.ProfilesAddBo={...this.ProfilesAddBo,userId:this.idx,name:this.form.name,height:this.form.height,educationLevel:this.form.educationLevel,occupation:this.form.occupation,interestsHobbies:this.form.interestsHobbies,selfDescription:this.form.selfDescription},console.log(this.ProfilesAddBo.img),console.log(this.form.img);var e=await(0,r.gv)("/profiles/add",this.ProfilesAddBo);"查询成功"===e.message&&this.$router.push("/home")},async updateProfile(){this.ProfilesUpdateBo={...this.ProfilesUpdateBo,userId:this.idx,name:this.form.name,img:this.form.img,height:this.form.height,educationLevel:this.form.educationLevel,occupation:this.form.occupation,interestsHobbies:this.form.interestsHobbies,selfDescription:this.form.selfDescription};var e=await(0,r.gv)("/profiles/updateProfilesById",this.ProfilesUpdateBo);"查询成功"===e.message&&this.$router.push("/home")},handleRemove(e,i){this.fileList=i,this.form.img=i.length?i[0].url:""},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleUploadSuccess(e,i,t){this.fileList=t,this.form.img=i.url}}},n=a,m=t(1656),f=(0,m.A)(n,o,s,!1,null,"35c44c4c",null),d=f.exports}}]);
//# sourceMappingURL=425.18edda1c.js.map